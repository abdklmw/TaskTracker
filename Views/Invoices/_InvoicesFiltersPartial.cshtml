@model InvoiceIndexViewModel

@{
    var hasFilters = Model.SelectedClientID != 0 || Model.SelectedStatus.HasValue || Model.PaidDateStart.HasValue ||
                     Model.PaidDateEnd.HasValue || Model.InvoiceDateStart.HasValue || Model.InvoiceDateEnd.HasValue ||
                     Model.InvoiceSentDateStart.HasValue || Model.InvoiceSentDateEnd.HasValue ||
                     Model.TotalAmountMin.HasValue || Model.TotalAmountMax.HasValue;
    var showFilterForm = hasFilters;
}

<div id="filter-form" class="row mb-3" style="display: @(showFilterForm ? "block" : "none");">
    <div class="col-12">
        <form asp-action="Index" method="get">
            <div class="filter-form-container row g-3">
                <div class="filter-group col-md-3">
                    <label asp-for="SelectedClientID" class="form-label">Filter by Client</label>
                    <select asp-for="SelectedClientID" class="form-select" asp-items="Model.ClientFilterOptions">
                        <option value="0">All Clients</option>
                    </select>
                </div>
                <div class="filter-group col-md-3">
                    <label asp-for="SelectedStatus" class="form-label">Status</label>
                    <select asp-for="SelectedStatus" class="form-select" asp-items="Model.StatusFilterOptions"></select>
                </div>
                <div class="filter-group col-md-3">
                    <label asp-for="TotalAmountMin" class="form-label">Amount</label>
                    <input asp-for="TotalAmountMin" class="form-control filter-invoice-currency-field" placeholder="Min" type="number" step="1.00" />
                    <span>-</span>
                    <input asp-for="TotalAmountMax" class="form-control filter-invoice-currency-field" placeholder="Max" type="number" step="1.00" />
                </div>
            </div>
            <div class="filter-form-container row g-3">
                <div class="filter-group col-md-3">
                    <label class="form-label">Invoice Date</label>
                    <div class="d-flex align-items-center gap-2">
                        <input asp-for="InvoiceDateStart" class="form-control" type="date" />
                        <span>-</span>
                        <input asp-for="InvoiceDateEnd" class="form-control" type="date" />
                    </div>
                </div>
                <div class="filter-group col-md-3">
                    <label class="form-label">Sent Date</label>
                    <div class="d-flex align-items-center gap-2">
                        <input asp-for="InvoiceSentDateStart" class="form-control" type="date" />
                        <span>-</span>
                        <input asp-for="InvoiceSentDateEnd" class="form-control" type="date" />
                    </div>
                </div>
                <div class="filter-group col-md-3">
                    <label class="form-label">Paid Date</label>
                    <div class="d-flex align-items-center gap-2">
                        <input asp-for="PaidDateStart" class="form-control" type="date" />
                        <span>-</span>
                        <input asp-for="PaidDateEnd" class="form-control" type="date" />
                    </div>
                </div>
            </div>
            <div class="filter-actions mt-3">
                <button type="submit" class="btn btn-primary">Apply Filter</button>
                @if (hasFilters)
                {
                    <button type="button" id="clear-filter-btn" class="clear-filter-btn">
                        <img src="~/images/icons/filter-xmark.svg" alt="Clear Filter" class="filter-icon" />
                    </button>
                }
            </div>
            <input type="hidden" name="page" value="1" />
            <input type="hidden" name="recordLimit" value="@Model.RecordLimit" />
        </form>
    </div>
</div>