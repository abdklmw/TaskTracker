@model TaskTracker.Models.Settings
@{
    ViewData["Title"] = "Settings";
}
<h1>Settings</h1>
<!-- Display success or error messages -->
@await Html.PartialAsync("~/Views/Shared/_AlertsPartial.cshtml")

<form asp-action="Update" method="post">
    @Html.AntiForgeryToken()
    <input type="hidden" asp-for="Id" />
    <input type="hidden" asp-for="SingletonGuard" />
    <div class="form-group">
        <label asp-for="CompanyName" class="control-label"></label>
        <input asp-for="CompanyName" class="form-control" required />
        <span asp-validation-for="CompanyName" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="DefaultHourlyRate" class="control-label"></label>
        <input asp-for="DefaultHourlyRate" class="form-control" type="number" step="0.01" required />
        <span asp-validation-for="DefaultHourlyRate" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="AccountsReceivableAddress" class="control-label"></label>
        <textarea asp-for="AccountsReceivableAddress" class="form-control"></textarea>
        <span asp-validation-for="AccountsReceivableAddress" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="AccountsReceivablePhone" class="control-label"></label>
        <input asp-for="AccountsReceivablePhone" class="form-control" />
        <span asp-validation-for="AccountsReceivablePhone" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="AccountsReceivableEmail" class="control-label"></label>
        <input asp-for="AccountsReceivableEmail" class="form-control" type="email" />
        <span asp-validation-for="AccountsReceivableEmail" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="PaymentInformation" class="control-label"></label>
        <textarea asp-for="PaymentInformation" class="form-control"></textarea>
        <span asp-validation-for="PaymentInformation" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="ThankYouMessage" class="control-label"></label>
        <textarea asp-for="ThankYouMessage" class="form-control"></textarea>
        <span asp-validation-for="ThankYouMessage" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="InvoiceTemplate" class="control-label"></label>
        <textarea asp-for="InvoiceTemplate" class="form-control" id="invoiceTemplate"></textarea>
        <span asp-validation-for="InvoiceTemplate" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="BCCAddress" class="control-label"></label>
        <input asp-for="BCCAddress" class="form-control" type="email" />
        <span asp-validation-for="BCCAddress" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="SmtpServer" class="control-label"></label>
        <input asp-for="SmtpServer" class="form-control" />
        <span asp-validation-for="SmtpServer" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="SmtpPort" class="control-label"></label>
        <input asp-for="SmtpPort" class="form-control" type="number" />
        <span asp-validation-for="SmtpPort" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="SmtpSenderEmail" class="control-label"></label>
        <input asp-for="SmtpSenderEmail" class="form-control" type="email" />
        <span asp-validation-for="SmtpSenderEmail" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="SmtpUsername" class="control-label"></label>
        <input asp-for="SmtpUsername" class="form-control" />
        <span asp-validation-for="SmtpUsername" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="SmtpPassword" class="control-label"></label>
        <input asp-for="SmtpPassword" class="form-control" type="password"
               placeholder="@(Model?.SmtpPassword != null ? "••••••••••••" : "Enter SMTP password")" />
        <span asp-validation-for="SmtpPassword" class="text-danger"></span>
        @if (Model?.SmtpPassword != null)
        {
            <small class="form-text text-muted">
                <i class="fas fa-info-circle"></i>
                Leave blank to keep existing password, or enter new password to update.
            </small>
        }
    </div>
    <div class="form-group mt-4">
        <input type="submit" value="Save" class="btn btn-primary" />
    </div>
</form>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    @*     <link rel="stylesheet" href="https://cdn.ckeditor.com/ckeditor5/45.1.0/ckeditor5.css" />
    <script src="https://cdn.ckeditor.com/ckeditor5/45.1.0/ckeditor5.umd.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            ClassicEditor
                .create(document.querySelector('#invoiceTemplate'), {
                    toolbar: ['undo', 'redo', '|', 'bold', 'italic', 'fontSize', 'fontFamily', 'fontColor', 'fontBackgroundColor', 'bulletedList', 'numberedList', 'insertTable']
                })
                .then(editor => {
                    console.log('Editor was initialized', editor);
                })
                .catch(error => {
                    console.error(error);
                });
        });
    </script> *@
}